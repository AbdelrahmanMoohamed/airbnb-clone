<div class="container p-4">
  <div class="form mx-4">

    <div class="d-flex align-items-center justify-content-between mb-3">
      <h2 class="mb-0">{{ isEdit ? 'Update Listing' : 'Add Listing' }}</h2>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="row g-3">

      <!-- Title -->
      <div class="col-md-6">
        <input type="text" class="form-control" placeholder="Title" formControlName="title">
      </div>

      <!-- Location -->
      <div class="col-md-6">
        <input type="text" class="form-control" placeholder="Location" formControlName="location">
      </div>

      <!-- Price -->
      <div class="col-md-6">
        <input type="number" class="form-control" placeholder="Price per night" formControlName="price" min="1">
      </div>

      <!-- Guests -->
      <div class="col-md-6">
        <input type="number" class="form-control" placeholder="Maximum guests" formControlName="guests" min="1">
      </div>

      <!-- Description -->
      <div class="col-12">
        <textarea rows="2" class="form-control" placeholder="Description" formControlName="description"></textarea>
      </div>

      <!-- Amenities -->
      <div class="col-md-6">
        <div class="input-group mb-2">
          <input #amInput type="text" class="form-control" placeholder="Amenities">
          <button type="button" class="btn add-amenity-btn" (click)="onAmenityAdd(amInput)">Add</button>
        </div>
        <div>
          <span *ngFor="let am of form.value.amenities; let i = index" class="badge bg-secondary me-2 mb-2">
            {{ am }}
            <button type="button" class="btn-close btn-close-white ms-1" (click)="removeAmenity(i)"></button>
          </span>
        </div>
      </div>

      <!-- Image upload -->
      <div class="col-md-6">
        <input type="file" class="img form-control" accept="image/*" (change)="onImageSelected($event)">
        <!-- <small class="text-muted">Temporary client preview; will switch to API upload later.</small> -->
      </div>

      <!-- Image Preview -->
      <div class="col-md-1" *ngIf="imagePreview">
        <img [src]="imagePreview" class="img-fluid rounded border" alt="Preview">
      </div>

      <!-- Buttons -->
      <div class="col-12 d-flex justify-content-center gap-2 mt-2">
        <button type="submit" class="btn btn-primary fs-5" [disabled]="form.invalid">
          {{ isEdit ? 'Update' : 'Add' }}
        </button>

        <!-- <button type="button" class="btn btn-outline-secondary" (click)="form.reset()">Reset</button> -->

        <!-- <button *ngIf="isEdit" type="button" class="btn btn-outline-danger ms-auto" (click)="onDelete()">
          Delete
        </button> -->
      </div>

    </form>
  </div>
</div>